<!DOCTYPE html>

<html lang="en"><head><meta charset="utf-8"/><title>Image Context 663012b1fd599cee</title>
<style>
body{font:14px/1.4 -apple-system,Segoe UI,Roboto,sans-serif;max-width:900px;margin:24px auto;padding:0 16px;color:#222}
h1{font-size:18px;margin:0 0 12px 0}
h2{font-size:16px;margin:16px 0 8px}
h3{font-size:14px;margin:10px 0 4px}
code,pre{background:#f6f8fa;padding:2px 4px;border-radius:4px}
figure{margin:10px 0;padding:8px;border:1px solid #e6e6e6;border-radius:8px}
figcaption{color:#555;font-size:12px;margin-top:6px}
pre {
  white-space: pre-wrap;     /* allow wrapping inside <pre> */
  overflow-wrap: anywhere;   /* break very long words/URLs */
  word-break: break-word;    /* fallback for older engines */
  max-width: 68ch;           /* ~68 characters line length */
  margin: 0 auto 10px;       /* center the block */
  line-height: 1.5;
}

figcaption {
  max-width: 68ch;           /* keep the sentence narrow */
  margin: 6px auto 0;        /* center under the image */
  white-space: normal;       /* ensure wrapping */
  overflow-wrap: anywhere;
  word-break: break-word;
  line-height: 1.5;
}
</style>
</head><body>
<h1>Image context</h1>
<p><strong>Search input:</strong></p>
<pre>Whether you are going up or going down, a staircase takes you to another level and to somewhere new, so it is important that its design should both reflect and generate a sense of anticipation and excitement. The success rests upon the innate curiosity of people to ascend and move to brighter elements in the interior. How dull, in contrast, are intact stairs who stand with ease, paying no attention to the perfect state of their matter. Such stairs rise despite their steps. The function transcends the material. The material is instrumental to an overriding activity that pursues its goal without noticeable difficulty. A flight of stairs is but of fleeting interest, unless it is a new and remarkable form. So we came to the realization that the exactitude of the stairs' dimensions was directly related to their significance. The emperor, king or Prince had exactly constructed stairs.</pre>
<p><strong>Search mode:</strong> paragraph_v   <strong>Targeting:</strong> 1.5×</p>
<h2>Selected image</h2>
<figure>
<a href="assets/film_scenes/Inglourious Bastards.2009.1080p.BrRip.x264.YIFY__01-34-31.000__01-34-45.000__5661e31bacab.mp4" rel="noopener" target="_blank"><img alt="" data-film-frame-url="/film-frame?film=%2FVolumes%2FPhD_drive2%2FVTFilms%2FInglourious+Bastards.2009.1080p.BrRip.x264.YIFY.mp4&amp;t=5680.000&amp;w=1024" data-scene-end="5685.000" data-scene-href="assets/film_scenes/Inglourious Bastards.2009.1080p.BrRip.x264.YIFY__01-34-31.000__01-34-45.000__5661e31bacab.mp4" data-scene-mp4="assets/film_scenes/Inglourious Bastards.2009.1080p.BrRip.x264.YIFY__01-34-31.000__01-34-45.000__5661e31bacab.mp4" data-scene-player="assets/film_scenes/Inglourious Bastards.2009.1080p.BrRip.x264.YIFY__01-34-31.000__01-34-45.000__5661e31bacab.html" data-scene-start="5671.000" src="assets/film_frames/Inglourious_Basterds_-_Quentin_Tarantino_(2009)__c9852a87bd__t05680.000__tc01-34-40.000__w1024.jpg" style="max-width:100%;height:auto;"/></a>
<figcaption>Region 0 — weapon, gunfire</figcaption>
</figure>
<h2>All regions</h2>
<section style="margin:16px 0;"><h3 style="margin:6px 0;">Region 0 — ['domesticity', 'referenced', 'commode', 'apron', 'blond', 'stepladder'], ['apron', 'heater', 'nightgown', 'blond', 'domesticity', 'referenced'], ['reporter', 'blur', 'hunted', 'suspect'], ['stepladder', 'heater', 'nightgown', 'commode'], ['suspect', 'speakerphone', 'hunted', 'referenced'], ['blur', 'deacon', 'protocol', 'meantime'], ['protocol', 'conviction', 'speakerphone'], ['deacon', 'conviction', 'unbeliever'], ['phrenologist', 'distraught', 'vomiting'], ['downwards', 'lamplight', 'pipe'], ['lamplight', 'pipe', 'downwards'], ['chemistry', 'embrace', 'domesticity'], ['domesticity', 'embrace', 'chemistry'], ['heartbeat', 'dartboard'], ['footer', 'radiator'], ['painted', 'canvas'], ['gunfire', 'weapon'], ['weapon', 'gunfire'], ['heartbeat', 'bench'], ['registry', 'reporter']</h3><ul style="margin:6px 0 0 18px;"><li><a href="assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__4255df0d6d__t05483.000__tc01-31-23.000__w300.jpg" target="_blank">assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__4255df0d6d__t05483.000__tc01-31-23.000__w300.jpg</a> — ['domesticity', 'referenced', 'commode', 'apron', 'blond', 'stepladder']</li><li><a href="assets/film_frames_300/Rosemarys_Baby_-_Roman_Polanski_(1968)__53e10aa490__t01419.000__tc00-23-39.000__w300.jpg" target="_blank">assets/film_frames_300/Rosemarys_Baby_-_Roman_Polanski_(1968)__53e10aa490__t01419.000__tc00-23-39.000__w300.jpg</a> — ['apron', 'heater', 'nightgown', 'blond', 'domesticity', 'referenced']</li><li><a href="assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__d8ecaa73f4__t09040.000__tc02-30-40.000__w300.jpg" target="_blank">assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__d8ecaa73f4__t09040.000__tc02-30-40.000__w300.jpg</a> — ['reporter', 'blur', 'hunted', 'suspect']</li><li><a href="/film-frame?film=%2FVolumes%2FPhD_drive2%2FVTFilms%2FThe.Big.Lebowski.1998.1080p.BrRip.x264.YIFY%2BHI.mp4&amp;t=4480.000&amp;w=1024" target="_blank">/film-frame?film=%2FVolumes%2FPhD_drive2%2FVTFilms%2FThe.Big.Lebowski.1998.1080p.BrRip.x264.YIFY%2BHI.mp4&amp;t=4480.000&amp;w=1024</a> — ['stepladder', 'heater', 'nightgown', 'commode']</li><li><a href="assets/film_frames_300/Lolita_-_Stanley_Kubrick_(1962)__89bbe46ccb__t06248.000__tc01-44-08.000__w300.jpg" target="_blank">assets/film_frames_300/Lolita_-_Stanley_Kubrick_(1962)__89bbe46ccb__t06248.000__tc01-44-08.000__w300.jpg</a> — ['suspect', 'speakerphone', 'hunted', 'referenced']</li><li><a href="assets/film_frames_300/Lost_Highway_-_David_Lynch_(1997)__5fdaa02d65__t01940.000__tc00-32-20.000__w300.jpg" target="_blank">assets/film_frames_300/Lost_Highway_-_David_Lynch_(1997)__5fdaa02d65__t01940.000__tc00-32-20.000__w300.jpg</a> — ['blur', 'deacon', 'protocol', 'meantime']</li><li><a href="assets/film_frames_300/Match_Point_-_Woody_Allen_(2005)__034bdf6f62__t03142.000__tc00-52-22.000__w300.jpg" target="_blank">assets/film_frames_300/Match_Point_-_Woody_Allen_(2005)__034bdf6f62__t03142.000__tc00-52-22.000__w300.jpg</a> — ['protocol', 'conviction', 'speakerphone']</li><li><a href="assets/film_frames_300/A_Separation_-_Asghar_Farhadi_(2011)__1aa7cab96c__t02190.000__tc00-36-30.000__w300.jpg" target="_blank">assets/film_frames_300/A_Separation_-_Asghar_Farhadi_(2011)__1aa7cab96c__t02190.000__tc00-36-30.000__w300.jpg</a> — ['deacon', 'conviction', 'unbeliever']</li><li><a href="assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__2cd091daeb__t02636.000__tc00-43-56.000__w300.jpg" target="_blank">assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__2cd091daeb__t02636.000__tc00-43-56.000__w300.jpg</a> — ['phrenologist', 'distraught', 'vomiting']</li><li><a href="assets/film_frames_300/Woman_in_the_Dunes_-_Hiroshi_Teshigahara_(1964)__ae1741cce0__t07939.000__tc02-12-19.000__w300.jpg" target="_blank">assets/film_frames_300/Woman_in_the_Dunes_-_Hiroshi_Teshigahara_(1964)__ae1741cce0__t07939.000__tc02-12-19.000__w300.jpg</a> — ['downwards', 'lamplight', 'pipe']</li><li><a href="assets/film_frames_300/Woman_in_the_Dunes_-_Hiroshi_Teshigahara_(1964)__e812239373__t07940.000__tc02-12-20.000__w300.jpg" target="_blank">assets/film_frames_300/Woman_in_the_Dunes_-_Hiroshi_Teshigahara_(1964)__e812239373__t07940.000__tc02-12-20.000__w300.jpg</a> — ['lamplight', 'pipe', 'downwards']</li><li><a href="assets/film_frames_300/After_Hours_-_Martin_Scorsese_(1985)__8176e21986__t01782.000__tc00-29-42.000__w300.jpg" target="_blank">assets/film_frames_300/After_Hours_-_Martin_Scorsese_(1985)__8176e21986__t01782.000__tc00-29-42.000__w300.jpg</a> — ['chemistry', 'embrace', 'domesticity']</li><li><a href="assets/film_frames_300/Megalopolis_-_Francis_Ford_Coppola_(2024)__130b51e021__t04510.000__tc01-15-10.000__w300.jpg" target="_blank">assets/film_frames_300/Megalopolis_-_Francis_Ford_Coppola_(2024)__130b51e021__t04510.000__tc01-15-10.000__w300.jpg</a> — ['domesticity', 'embrace', 'chemistry']</li><li><a href="assets/film_frames_300/Live_Flesh_(Carne_trmula)_-_Pedro_Almodvar_(1997)__6f762e0a23__t01153.000__tc00-19-13.000__w300.jpg" target="_blank">assets/film_frames_300/Live_Flesh_(Carne_trmula)_-_Pedro_Almodvar_(1997)__6f762e0a23__t01153.000__tc00-19-13.000__w300.jpg</a> — ['heartbeat', 'dartboard']</li><li><a href="assets/film_frames_300/Stntang_-_Bla_Tarr_(1994)__ca0243d58f__t15430.000__tc04-17-10.000__w300.jpg" target="_blank">assets/film_frames_300/Stntang_-_Bla_Tarr_(1994)__ca0243d58f__t15430.000__tc04-17-10.000__w300.jpg</a> — ['footer', 'radiator']</li><li><a href="assets/film_frames_300/Parthenope_-_Paolo_Sorrentino_(2023)__355caa9bbf__t06740.000__tc01-52-20.000__w300.jpg" target="_blank">assets/film_frames_300/Parthenope_-_Paolo_Sorrentino_(2023)__355caa9bbf__t06740.000__tc01-52-20.000__w300.jpg</a> — ['painted', 'canvas']</li><li><a href="assets/film_frames_300/Inglourious_Basterds_-_Quentin_Tarantino_(2009)__bf5af159a0__t05615.000__tc01-33-35.000__w300.jpg" target="_blank">assets/film_frames_300/Inglourious_Basterds_-_Quentin_Tarantino_(2009)__bf5af159a0__t05615.000__tc01-33-35.000__w300.jpg</a> — ['gunfire', 'weapon']</li><li><a href="assets/film_frames_300/Inglourious_Basterds_-_Quentin_Tarantino_(2009)__c9852a87bd__t05680.000__tc01-34-40.000__w300.jpg" target="_blank">assets/film_frames_300/Inglourious_Basterds_-_Quentin_Tarantino_(2009)__c9852a87bd__t05680.000__tc01-34-40.000__w300.jpg</a> — ['weapon', 'gunfire']</li><li><a href="assets/film_frames_300/Songs_from_the_Second_Floor_-_Roy_Andersson_(2000)__c2e1c9d0e0__t02280.000__tc00-38-00.000__w300.jpg" target="_blank">assets/film_frames_300/Songs_from_the_Second_Floor_-_Roy_Andersson_(2000)__c2e1c9d0e0__t02280.000__tc00-38-00.000__w300.jpg</a> — ['heartbeat', 'bench']</li><li><a href="assets/film_frames_300/Songs_from_the_Second_Floor_-_Roy_Andersson_(2000)__3667591ef3__t04811.000__tc01-20-11.000__w300.jpg" target="_blank">assets/film_frames_300/Songs_from_the_Second_Floor_-_Roy_Andersson_(2000)__3667591ef3__t04811.000__tc01-20-11.000__w300.jpg</a> — ['registry', 'reporter']</li></ul></section>
<section style="margin:16px 0;"><h3 style="margin:6px 0;">Region 1 — ['compelled', 'banister', 'nonparallel', 'assassination', 'executing', 'bedpost', 'deflecting'], ['bedpost', 'bolting', 'banister', 'rue', 'deflecting', 'carve', 'surprised'], ['mountaintop', 'camisole', 'dress', 'goodbye', 'passageway'], ['nonparallel', 'dress', 'compelled', 'madame', 'passageway'], ['assassination', 'executing', 'chute', 'bandage'], ['bedpost', 'deflecting', 'carve', 'banister', 'rue', 'surprised', 'bolting'], ['shoplifting', 'madame', 'camisole', 'dress', 'banister'], ['assassination', 'doorman', 'deflecting', 'robbing', 'passageway', 'counterattack'], ['registrar', 'letter'], ['pointing', 'mountaintop'], ['doorman', 'banister', 'registrar', 'passageway'], ['chute', 'banister', 'pointing'], ['nonparallel', 'shoplifting', 'goodbye', 'banister'], ['counterattack', 'marcher', 'passageway'], ['proprietor', 'bedpost', 'quotation', 'passageway', 'banister'], ['bedpost', 'intern', 'oleander', 'nonparallel', 'camisole'], ['mandrake', 'bedpost', 'squat'], ['banister', 'passer', 'inconspicuous'], ['nonparallel', 'marcher'], ['petrified', 'dress', 'camisole']</h3><ul style="margin:6px 0 0 18px;"><li><a href="assets/film_frames_300/Reservoir_Dogs_-_Quentin_Tarantino_(1992)__b5db4038b4__t02480.000__tc00-41-20.000__w300.jpg" target="_blank">assets/film_frames_300/Reservoir_Dogs_-_Quentin_Tarantino_(1992)__b5db4038b4__t02480.000__tc00-41-20.000__w300.jpg</a> — ['compelled', 'banister', 'nonparallel', 'assassination', 'executing', 'bedpost', 'deflecting']</li><li><a href="assets/film_frames_300/Silence_-_Martin_Scorsese_(2016)__00d82b1537__t06440.000__tc01-47-20.000__w300.jpg" target="_blank">assets/film_frames_300/Silence_-_Martin_Scorsese_(2016)__00d82b1537__t06440.000__tc01-47-20.000__w300.jpg</a> — ['bedpost', 'bolting', 'banister', 'rue', 'deflecting', 'carve', 'surprised']</li><li><a href="assets/film_frames_300/Mulholland_Dr._-_David_Lynch_(2001)__5e15272684__t00410.000__tc00-06-50.000__w300.jpg" target="_blank">assets/film_frames_300/Mulholland_Dr._-_David_Lynch_(2001)__5e15272684__t00410.000__tc00-06-50.000__w300.jpg</a> — ['mountaintop', 'camisole', 'dress', 'goodbye', 'passageway']</li><li><a href="assets/film_frames_300/Turkish_Delight_-_Paul_Verhoeven_(1973)__a527b46de2__t00540.000__tc00-09-00.000__w300.jpg" target="_blank">assets/film_frames_300/Turkish_Delight_-_Paul_Verhoeven_(1973)__a527b46de2__t00540.000__tc00-09-00.000__w300.jpg</a> — ['nonparallel', 'dress', 'compelled', 'madame', 'passageway']</li><li><a href="assets/film_frames_300/A_Clockwork_Orange_-_Stanley_Kubrick_(1971)__80eacc7720__t04339.000__tc01-12-19.000__w300.jpg" target="_blank">assets/film_frames_300/A_Clockwork_Orange_-_Stanley_Kubrick_(1971)__80eacc7720__t04339.000__tc01-12-19.000__w300.jpg</a> — ['assassination', 'executing', 'chute', 'bandage']</li><li><a href="assets/film_frames_300/Silence_-_Martin_Scorsese_(2016)__00d82b1537__t06440.000__tc01-47-20.000__w300.jpg" target="_blank">assets/film_frames_300/Silence_-_Martin_Scorsese_(2016)__00d82b1537__t06440.000__tc01-47-20.000__w300.jpg</a> — ['bedpost', 'deflecting', 'carve', 'banister', 'rue', 'surprised', 'bolting']</li><li><a href="assets/film_frames_300/Lolita_-_Stanley_Kubrick_(1962)__61f660d994__t02270.000__tc00-37-50.000__w300.jpg" target="_blank">assets/film_frames_300/Lolita_-_Stanley_Kubrick_(1962)__61f660d994__t02270.000__tc00-37-50.000__w300.jpg</a> — ['shoplifting', 'madame', 'camisole', 'dress', 'banister']</li><li><a href="assets/film_frames_300/Django_Unchained_-_Quentin_Tarantino_(2012)__0580f113af__t08330.000__tc02-18-50.000__w300.jpg" target="_blank">assets/film_frames_300/Django_Unchained_-_Quentin_Tarantino_(2012)__0580f113af__t08330.000__tc02-18-50.000__w300.jpg</a> — ['assassination', 'doorman', 'deflecting', 'robbing', 'passageway', 'counterattack']</li><li><a href="assets/film_frames_300/Babylon_-_Damien_Chazelle_(2022)__f2e46fe46c__t04828.000__tc01-20-28.000__w300.jpg" target="_blank">assets/film_frames_300/Babylon_-_Damien_Chazelle_(2022)__f2e46fe46c__t04828.000__tc01-20-28.000__w300.jpg</a> — ['registrar', 'letter']</li><li><a href="assets/film_frames_300/Elvis_-_Baz_Luhrmann_(2022)__a730195a9c__t04492.000__tc01-14-52.000__w300.jpg" target="_blank">assets/film_frames_300/Elvis_-_Baz_Luhrmann_(2022)__a730195a9c__t04492.000__tc01-14-52.000__w300.jpg</a> — ['pointing', 'mountaintop']</li><li><a href="assets/film_frames_300/Werckmeister_Harmonies_-_Bla_Tarr_gnes_Hranitzky_(2000)__5ce499eab9__t01690.000__tc00-28-10.000__w300.jpg" target="_blank">assets/film_frames_300/Werckmeister_Harmonies_-_Bla_Tarr_gnes_Hranitzky_(2000)__5ce499eab9__t01690.000__tc00-28-10.000__w300.jpg</a> — ['doorman', 'banister', 'registrar', 'passageway']</li><li><a href="assets/film_frames_300/Broken_Embraces_(Los_abrazos_rotos)_-_Pedro_Almodvar_(2009)__f3b6f64f1d__t04865.000__tc01-21-05.000__w300.jpg" target="_blank">assets/film_frames_300/Broken_Embraces_(Los_abrazos_rotos)_-_Pedro_Almodvar_(2009)__f3b6f64f1d__t04865.000__tc01-21-05.000__w300.jpg</a> — ['chute', 'banister', 'pointing']</li><li><a href="assets/film_frames_300/Blue_Jasmine_-_Woody_Allen_(2013)__1eb079325e__t00142.000__tc00-02-22.000__w300.jpg" target="_blank">assets/film_frames_300/Blue_Jasmine_-_Woody_Allen_(2013)__1eb079325e__t00142.000__tc00-02-22.000__w300.jpg</a> — ['nonparallel', 'shoplifting', 'goodbye', 'banister']</li><li><a href="assets/film_frames_300/Elvis_-_Baz_Luhrmann_(2022)__0ae1998e8b__t04639.000__tc01-17-19.000__w300.jpg" target="_blank">assets/film_frames_300/Elvis_-_Baz_Luhrmann_(2022)__0ae1998e8b__t04639.000__tc01-17-19.000__w300.jpg</a> — ['counterattack', 'marcher', 'passageway']</li><li><a href="assets/film_frames_300/Caught_Stealing_-_Darren_Aronofsky_(2025)__32263bac1d__t01260.000__tc00-21-00.000__w300.jpg" target="_blank">assets/film_frames_300/Caught_Stealing_-_Darren_Aronofsky_(2025)__32263bac1d__t01260.000__tc00-21-00.000__w300.jpg</a> — ['proprietor', 'bedpost', 'quotation', 'passageway', 'banister']</li><li><a href="assets/film_frames_300/Volver_-_Pedro_Almodvar_(2006)__2badcdbca9__t04367.000__tc01-12-47.000__w300.jpg" target="_blank">assets/film_frames_300/Volver_-_Pedro_Almodvar_(2006)__2badcdbca9__t04367.000__tc01-12-47.000__w300.jpg</a> — ['bedpost', 'intern', 'oleander', 'nonparallel', 'camisole']</li><li><a href="assets/film_frames_300/Stuart_A_Life_Backwards_-_David_Attwood_(2007)__2a5df4d71d__t02802.000__tc00-46-42.000__w300.jpg" target="_blank">assets/film_frames_300/Stuart_A_Life_Backwards_-_David_Attwood_(2007)__2a5df4d71d__t02802.000__tc00-46-42.000__w300.jpg</a> — ['mandrake', 'bedpost', 'squat']</li><li><a href="assets/film_frames_300/Tie_Me_Up_Tie_Me_Down_-_Pedro_Almodvar_(1990)__d982804208__t00350.000__tc00-05-50.000__w300.jpg" target="_blank">assets/film_frames_300/Tie_Me_Up_Tie_Me_Down_-_Pedro_Almodvar_(1990)__d982804208__t00350.000__tc00-05-50.000__w300.jpg</a> — ['banister', 'passer', 'inconspicuous']</li><li><a href="assets/film_frames_300/Happy_Together_-_Wong_Kar-wai_(1997)__196fe8abc7__t02910.000__tc00-48-30.000__w300.jpg" target="_blank">assets/film_frames_300/Happy_Together_-_Wong_Kar-wai_(1997)__196fe8abc7__t02910.000__tc00-48-30.000__w300.jpg</a> — ['nonparallel', 'marcher']</li><li><a href="assets/film_frames_300/Pierrot_le_Fou_-_Jean-Luc_Godard_(1965)__2196ec7bd6__t03157.000__tc00-52-37.000__w300.jpg" target="_blank">assets/film_frames_300/Pierrot_le_Fou_-_Jean-Luc_Godard_(1965)__2196ec7bd6__t03157.000__tc00-52-37.000__w300.jpg</a> — ['petrified', 'dress', 'camisole']</li></ul></section>
<section style="margin:16px 0;"><h3 style="margin:6px 0;">Region 2 — ['machinist', 'mirrored', 'renovating', 'trapped'], ['floorboard', 'drinker', 'casualty', 'squalor'], ['machinist', 'flywheel', 'floorboard', 'foot'], ['infiltrating', 'squalor', 'townsfolk'], ['finch', 'distorted', 'mirrored'], ['syringe', 'infiltrating', 'converging'], ['converging', 'distorted', 'flywheel'], ['mark', 'burglarized', 'songwriter'], ['saddle', 'barmaid', 'songwriter'], ['terminate', 'syringe', 'trapped'], ['burglarized', 'finch'], ['fey', 'townsfolk'], ['saddle', 'barmaid'], ['massacre', 'slaughtered'], ['slaughtered', 'massacre', 'floorboard'], ['casualty', 'obituary'], ['interpreting', 'eavesdrop'], ['renovating', 'terminate'], ['sherry', 'interpreting'], ['eavesdrop', 'spook']</h3><ul style="margin:6px 0 0 18px;"><li><a href="assets/film_frames_300/Fight_Club_-_David_Fincher_(1999)__fd64cfe96f__t02211.000__tc00-36-51.000__w300.jpg" target="_blank">assets/film_frames_300/Fight_Club_-_David_Fincher_(1999)__fd64cfe96f__t02211.000__tc00-36-51.000__w300.jpg</a> — ['machinist', 'mirrored', 'renovating', 'trapped']</li><li><a href="assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__1c227276cf__t07514.000__tc02-05-14.000__w300.jpg" target="_blank">assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__1c227276cf__t07514.000__tc02-05-14.000__w300.jpg</a> — ['floorboard', 'drinker', 'casualty', 'squalor']</li><li><a href="assets/film_frames_300/Triangle_of_Sadness_-_Ruben_stlund_(2022)__864709158d__t03562.000__tc00-59-22.000__w300.jpg" target="_blank">assets/film_frames_300/Triangle_of_Sadness_-_Ruben_stlund_(2022)__864709158d__t03562.000__tc00-59-22.000__w300.jpg</a> — ['machinist', 'flywheel', 'floorboard', 'foot']</li><li><a href="assets/film_frames_300/Tales_from_Earthsea_-_Goro_Miyazaki_(2006)__fbfa3225b9__t01089.000__tc00-18-09.000__w300.jpg" target="_blank">assets/film_frames_300/Tales_from_Earthsea_-_Goro_Miyazaki_(2006)__fbfa3225b9__t01089.000__tc00-18-09.000__w300.jpg</a> — ['infiltrating', 'squalor', 'townsfolk']</li><li><a href="assets/film_frames_300/Kill_Bill_Vol._1_-_Quentin_Tarantino_(2003)__ea81b0a389__t04740.000__tc01-19-00.000__w300.jpg" target="_blank">assets/film_frames_300/Kill_Bill_Vol._1_-_Quentin_Tarantino_(2003)__ea81b0a389__t04740.000__tc01-19-00.000__w300.jpg</a> — ['finch', 'distorted', 'mirrored']</li><li><a href="assets/film_frames_300/Fear_and_Loathing_in_Las_Vegas_-_Terry_Gilliam_(1998)__7ca184ffc3__t02676.000__tc00-44-36.000__w300.jpg" target="_blank">assets/film_frames_300/Fear_and_Loathing_in_Las_Vegas_-_Terry_Gilliam_(1998)__7ca184ffc3__t02676.000__tc00-44-36.000__w300.jpg</a> — ['syringe', 'infiltrating', 'converging']</li><li><a href="assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__a2fe592766__t04974.000__tc01-22-54.000__w300.jpg" target="_blank">assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__a2fe592766__t04974.000__tc01-22-54.000__w300.jpg</a> — ['converging', 'distorted', 'flywheel']</li><li><a href="assets/film_frames_300/The_Gentlemen_-_Guy_Ritchie_(2019)__ddd8176563__t01771.000__tc00-29-31.000__w300.jpg" target="_blank">assets/film_frames_300/The_Gentlemen_-_Guy_Ritchie_(2019)__ddd8176563__t01771.000__tc00-29-31.000__w300.jpg</a> — ['mark', 'burglarized', 'songwriter']</li><li><a href="assets/film_frames_300/Once_Upon_a_Time_in_Hollywood_-_Quentin_Tarantino_(2019)__fc680dc209__t03212.000__tc00-53-32.000__w300.jpg" target="_blank">assets/film_frames_300/Once_Upon_a_Time_in_Hollywood_-_Quentin_Tarantino_(2019)__fc680dc209__t03212.000__tc00-53-32.000__w300.jpg</a> — ['saddle', 'barmaid', 'songwriter']</li><li><a href="assets/film_frames_300/Chungking_Express_-_Wong_Kar-wai_(1994)__72d02d2bc2__t01290.000__tc00-21-30.000__w300.jpg" target="_blank">assets/film_frames_300/Chungking_Express_-_Wong_Kar-wai_(1994)__72d02d2bc2__t01290.000__tc00-21-30.000__w300.jpg</a> — ['terminate', 'syringe', 'trapped']</li><li><a href="assets/film_frames_300/My_Neighbor_Totoro_-_Hayao_Miyazaki_(1988)__783c856c0e__t00800.000__tc00-13-20.000__w300.jpg" target="_blank">assets/film_frames_300/My_Neighbor_Totoro_-_Hayao_Miyazaki_(1988)__783c856c0e__t00800.000__tc00-13-20.000__w300.jpg</a> — ['burglarized', 'finch']</li><li><a href="assets/film_frames_300/Blue_Jasmine_-_Woody_Allen_(2013)__4da93501ac__t02442.000__tc00-40-42.000__w300.jpg" target="_blank">assets/film_frames_300/Blue_Jasmine_-_Woody_Allen_(2013)__4da93501ac__t02442.000__tc00-40-42.000__w300.jpg</a> — ['fey', 'townsfolk']</li><li><a href="assets/film_frames_300/Once_Upon_a_Time_in_Hollywood_-_Quentin_Tarantino_(2019)__24ddb0ee5e__t03210.000__tc00-53-30.000__w300.jpg" target="_blank">assets/film_frames_300/Once_Upon_a_Time_in_Hollywood_-_Quentin_Tarantino_(2019)__24ddb0ee5e__t03210.000__tc00-53-30.000__w300.jpg</a> — ['saddle', 'barmaid']</li><li><a href="assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__236eb2e1c1__t00130.000__tc00-02-10.000__w300.jpg" target="_blank">assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__236eb2e1c1__t00130.000__tc00-02-10.000__w300.jpg</a> — ['massacre', 'slaughtered']</li><li><a href="assets/film_frames_300/Howls_Moving_Castle_-_Hayao_Miyazaki_(2004)__105db3ecf2__t04330.000__tc01-12-10.000__w300.jpg" target="_blank">assets/film_frames_300/Howls_Moving_Castle_-_Hayao_Miyazaki_(2004)__105db3ecf2__t04330.000__tc01-12-10.000__w300.jpg</a> — ['slaughtered', 'massacre', 'floorboard']</li><li><a href="assets/film_frames_300/Songs_from_the_Second_Floor_-_Roy_Andersson_(2000)__c58b14f0ac__t02703.000__tc00-45-03.000__w300.jpg" target="_blank">assets/film_frames_300/Songs_from_the_Second_Floor_-_Roy_Andersson_(2000)__c58b14f0ac__t02703.000__tc00-45-03.000__w300.jpg</a> — ['casualty', 'obituary']</li><li><a href="assets/film_frames_300/The_Man_Without_a_Past_-_Aki_Kaurismki_(2002)__0fc0f7f5b5__t04606.000__tc01-16-46.000__w300.jpg" target="_blank">assets/film_frames_300/The_Man_Without_a_Past_-_Aki_Kaurismki_(2002)__0fc0f7f5b5__t04606.000__tc01-16-46.000__w300.jpg</a> — ['interpreting', 'eavesdrop']</li><li><a href="assets/film_frames_300/Inglourious_Basterds_-_Quentin_Tarantino_(2009)__ff9107de40__t05750.000__tc01-35-50.000__w300.jpg" target="_blank">assets/film_frames_300/Inglourious_Basterds_-_Quentin_Tarantino_(2009)__ff9107de40__t05750.000__tc01-35-50.000__w300.jpg</a> — ['renovating', 'terminate']</li><li><a href="assets/film_frames_300/The_Shining_-_Stanley_Kubrick_(1980)__a1494fb85e__t07770.000__tc02-09-30.000__w300.jpg" target="_blank">assets/film_frames_300/The_Shining_-_Stanley_Kubrick_(1980)__a1494fb85e__t07770.000__tc02-09-30.000__w300.jpg</a> — ['sherry', 'interpreting']</li><li><a href="assets/film_frames_300/Mean_Streets_-_Martin_Scorsese_(1973)__b013077564__t02750.000__tc00-45-50.000__w300.jpg" target="_blank">assets/film_frames_300/Mean_Streets_-_Martin_Scorsese_(1973)__b013077564__t02750.000__tc00-45-50.000__w300.jpg</a> — ['eavesdrop', 'spook']</li></ul></section>
<section style="margin:16px 0;"><h3 style="margin:6px 0;">Region 3 — ['hallway', 'interrogating', 'blackout', 'psychoanalysis', 'psychotherapy', 'confront'], ['housework', 'plunger', 'doorway', 'hallway', 'flatmate'], ['confront', 'vulnerable', 'eavesdropper', 'interrogating', 'doorway'], ['tidied', 'wardrobe', 'doorway', 'flatmate'], ['clothed', 'housework', 'wardrobe'], ['interrogating', 'psychotherapy', 'psychoanalysis', 'midsummer'], ['stoop', 'kissing', 'rhinoplasty'], ['plunger', 'hallway', 'doorway', 'eavesdropper', 'stoop'], ['bounding', 'trailing', 'hallway', 'purse'], ['footprint', 'trailing', 'stomp'], ['bounding', 'purse'], ['footprint', 'stomp'], ['flooding', 'submerged'], ['flooding', 'submerged'], ['clothed', 'hallway', 'veronica'], ['loser', 'bet', 'confront', 'hallway'], ['doorway', 'touchy', 'kissing'], ['hole', 'vulnerable', 'doorway', 'hallway'], ['midsummer', 'interrogating', 'caretaker'], ['confront', 'rhinoplasty']</h3><ul style="margin:6px 0 0 18px;"><li><a href="assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__68a6ecc618__t00800.000__tc00-13-20.000__w300.jpg" target="_blank">assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__68a6ecc618__t00800.000__tc00-13-20.000__w300.jpg</a> — ['hallway', 'interrogating', 'blackout', 'psychoanalysis', 'psychotherapy', 'confront']</li><li><a href="assets/film_frames_300/Parasite_-_Bong_Joon-ho_(2019)__4677067bee__t00830.000__tc00-13-50.000__w300.jpg" target="_blank">assets/film_frames_300/Parasite_-_Bong_Joon-ho_(2019)__4677067bee__t00830.000__tc00-13-50.000__w300.jpg</a> — ['housework', 'plunger', 'doorway', 'hallway', 'flatmate']</li><li><a href="assets/film_frames_300/4_Months,_3_Weeks_and_2_Days_-_Cristian_Mungiu_(2007)__76e721555f__t00887.000__tc00-14-47.000__w300.jpg" target="_blank">assets/film_frames_300/4_Months,_3_Weeks_and_2_Days_-_Cristian_Mungiu_(2007)__76e721555f__t00887.000__tc00-14-47.000__w300.jpg</a> — ['confront', 'vulnerable', 'eavesdropper', 'interrogating', 'doorway']</li><li><a href="assets/film_frames_300/A_Clockwork_Orange_-_Stanley_Kubrick_(1971)__8dc916cb77__t00590.000__tc00-09-50.000__w300.jpg" target="_blank">assets/film_frames_300/A_Clockwork_Orange_-_Stanley_Kubrick_(1971)__8dc916cb77__t00590.000__tc00-09-50.000__w300.jpg</a> — ['tidied', 'wardrobe', 'doorway', 'flatmate']</li><li><a href="assets/film_frames_300/The_Prime_of_Miss_Jean_Brodie_-_Ronald_Neame_(1969)__6fb1a35e39__t05000.000__tc01-23-20.000__w300.jpg" target="_blank">assets/film_frames_300/The_Prime_of_Miss_Jean_Brodie_-_Ronald_Neame_(1969)__6fb1a35e39__t05000.000__tc01-23-20.000__w300.jpg</a> — ['clothed', 'housework', 'wardrobe']</li><li><a href="assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__58ca03ccfe__t04368.000__tc01-12-48.000__w300.jpg" target="_blank">assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__58ca03ccfe__t04368.000__tc01-12-48.000__w300.jpg</a> — ['interrogating', 'psychotherapy', 'psychoanalysis', 'midsummer']</li><li><a href="assets/film_frames_300/The_Graduate_-_Mike_Nichols_(1967)__b4fcd5def2__t04552.000__tc01-15-52.000__w300.jpg" target="_blank">assets/film_frames_300/The_Graduate_-_Mike_Nichols_(1967)__b4fcd5def2__t04552.000__tc01-15-52.000__w300.jpg</a> — ['stoop', 'kissing', 'rhinoplasty']</li><li><a href="assets/film_frames_300/Arrietty_-_Hiromasa_Yonebayashi_(2010)__316fb8f2e2__t04500.000__tc01-15-00.000__w300.jpg" target="_blank">assets/film_frames_300/Arrietty_-_Hiromasa_Yonebayashi_(2010)__316fb8f2e2__t04500.000__tc01-15-00.000__w300.jpg</a> — ['plunger', 'hallway', 'doorway', 'eavesdropper', 'stoop']</li><li><a href="assets/film_frames_300/Magnolia_-_Paul_Thomas_Anderson_(1999)__7040fd0d04__t02630.000__tc00-43-50.000__w300.jpg" target="_blank">assets/film_frames_300/Magnolia_-_Paul_Thomas_Anderson_(1999)__7040fd0d04__t02630.000__tc00-43-50.000__w300.jpg</a> — ['bounding', 'trailing', 'hallway', 'purse']</li><li><a href="assets/film_frames_300/Broken_Embraces_(Los_abrazos_rotos)_-_Pedro_Almodvar_(2009)__f3b6f64f1d__t04865.000__tc01-21-05.000__w300.jpg" target="_blank">assets/film_frames_300/Broken_Embraces_(Los_abrazos_rotos)_-_Pedro_Almodvar_(2009)__f3b6f64f1d__t04865.000__tc01-21-05.000__w300.jpg</a> — ['footprint', 'trailing', 'stomp']</li><li><a href="assets/film_frames_300/The_Prime_of_Miss_Jean_Brodie_-_Ronald_Neame_(1969)__6f4ce87f2b__t05233.000__tc01-27-13.000__w300.jpg" target="_blank">assets/film_frames_300/The_Prime_of_Miss_Jean_Brodie_-_Ronald_Neame_(1969)__6f4ce87f2b__t05233.000__tc01-27-13.000__w300.jpg</a> — ['bounding', 'purse']</li><li><a href="assets/film_frames_300/Broken_Embraces_(Los_abrazos_rotos)_-_Pedro_Almodvar_(2009)__60461d54a7__t05320.000__tc01-28-40.000__w300.jpg" target="_blank">assets/film_frames_300/Broken_Embraces_(Los_abrazos_rotos)_-_Pedro_Almodvar_(2009)__60461d54a7__t05320.000__tc01-28-40.000__w300.jpg</a> — ['footprint', 'stomp']</li><li><a href="assets/film_frames_300/Ulysses_Gaze_-_Theo_Angelopoulos_(1995)__68a10069d6__t05980.000__tc01-39-40.000__w300.jpg" target="_blank">assets/film_frames_300/Ulysses_Gaze_-_Theo_Angelopoulos_(1995)__68a10069d6__t05980.000__tc01-39-40.000__w300.jpg</a> — ['flooding', 'submerged']</li><li><a href="assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__7660ff7c33__t08070.000__tc02-14-30.000__w300.jpg" target="_blank">assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__7660ff7c33__t08070.000__tc02-14-30.000__w300.jpg</a> — ['flooding', 'submerged']</li><li><a href="assets/film_frames_300/The_Banshees_of_Inisherin_-_Martin_McDonagh_(2022)__ab7aabb0c3__t03440.000__tc00-57-20.000__w300.jpg" target="_blank">assets/film_frames_300/The_Banshees_of_Inisherin_-_Martin_McDonagh_(2022)__ab7aabb0c3__t03440.000__tc00-57-20.000__w300.jpg</a> — ['clothed', 'hallway', 'veronica']</li><li><a href="assets/film_frames_300/Lost_Highway_-_David_Lynch_(1997)__a84c2b1d59__t06450.000__tc01-47-30.000__w300.jpg" target="_blank">assets/film_frames_300/Lost_Highway_-_David_Lynch_(1997)__a84c2b1d59__t06450.000__tc01-47-30.000__w300.jpg</a> — ['loser', 'bet', 'confront', 'hallway']</li><li><a href="assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__b2ac8823f3__t05700.000__tc01-35-00.000__w300.jpg" target="_blank">assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__b2ac8823f3__t05700.000__tc01-35-00.000__w300.jpg</a> — ['doorway', 'touchy', 'kissing']</li><li><a href="assets/film_frames_300/Pusher_-_Nicolas_Winding_Refn_(1996)__22a5ef448b__t03060.000__tc00-51-00.000__w300.jpg" target="_blank">assets/film_frames_300/Pusher_-_Nicolas_Winding_Refn_(1996)__22a5ef448b__t03060.000__tc00-51-00.000__w300.jpg</a> — ['hole', 'vulnerable', 'doorway', 'hallway']</li><li><a href="assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__a90773740a__t06630.000__tc01-50-30.000__w300.jpg" target="_blank">assets/film_frames_300/Dogville_-_Lars_von_Trier_(2003)__a90773740a__t06630.000__tc01-50-30.000__w300.jpg</a> — ['midsummer', 'interrogating', 'caretaker']</li><li><a href="assets/film_frames_300/28_Days_Later_-_Danny_Boyle_(2002)__a39596d1d7__t00650.000__tc00-10-50.000__w300.jpg" target="_blank">assets/film_frames_300/28_Days_Later_-_Danny_Boyle_(2002)__a39596d1d7__t00650.000__tc00-10-50.000__w300.jpg</a> — ['confront', 'rhinoplasty']</li></ul></section>
<style>
  /* Region dropdowns */
  details.region {
    margin: 16px 0;
    border: 1px solid #e6e6e6;
    border-radius: 10px;
    padding: 8px 10px;
    background: #fff;
  }
  details.region > summary {
    cursor: pointer;
    font-weight: 600;
    list-style: none;
    outline: none;
  }
  details.region > summary::-webkit-details-marker { display: none; }
  details.region[open] > summary { margin-bottom: 8px; }

  /* Secondary (inline preview) dropdowns under each link */
  details.secondary {
    margin-top: 6px;
    border-left: 3px solid #e6e6e6;
    padding-left: 10px;
  }
  details.secondary > summary {
    cursor: pointer;
    font-size: 12px;
    color: #444;
    list-style: none;
    outline: none;
  }
  details.secondary > summary::-webkit-details-marker { display: none; }

  .secondary-status {
    font-size: 12px;
    color: #666;
    margin: 6px 0;
  }
  .secondary-embed {
    border: 1px solid #eee;
    border-radius: 8px;
    padding: 8px;
    overflow: auto;
    max-height: 70vh;
    background: #fafafa;
  }
  details.region ul { padding-left: 0; }
  details.region li {
    list-style: none;
    display: flex;
    gap: 10px;
    align-items: flex-start;
    margin: 10px 0;
  }

  a.thumb-link { display: inline-block; }
  img.thumb {
    display: block;
    width: 140px;          /* tweak as desired */
    height: auto;
    border: 1px solid #e6e6e6;
    border-radius: 10px;
    background: #fff;
  }

  /* If you want the caption text to wrap nicely next to the thumb */
  .thumb-caption {
    line-height: 1.25;
  }
</style>
<script>
(() => {
  /**
   * Controls behaviour:
   * - If true: when a REGION opens, prefetch all secondary HTML previews in that region.
   * - If false (default): only fetch when the per-link “Inline preview” dropdown is opened
   *   (still satisfies “only when region is expanded”, because you can’t open the preview otherwise).
   */
  const PRELOAD_ON_REGION_OPEN = false;

  // Consider a link “secondary HTML” if it ends with .html/.htm/.xhtml
  // OR if you explicitly mark it with class="secondary-link" or data-secondary="1".
  const SECONDARY_RE = /\.(?:xhtml|html?|htm)(?:[?#].*)?$/i;
  const IMG_RE = /\.(?:png|jpe?g|gif|webp|svg)(?:[?#].*)?$/i;

  // Cache fetches so repeated opens don't refetch the same page.
  const fetchCache = new Map(); // url -> Promise<string>

  function hydrateImageThumbnails(regionDetails) {
  const anchors = Array.from(regionDetails.querySelectorAll("a[href]"));

  for (const a of anchors) {
    const href = a.getAttribute("href") || "";
    if (!IMG_RE.test(href)) continue;

    // If already an image (e.g., you manually made one), skip.
    if (a.querySelector("img")) continue;

    // Make the link open the full image in a new tab (optional but usually nicer)
    a.target = "_blank";
    a.rel = "noopener";
    a.classList.add("thumb-link");

    // Preserve any trailing text after the link (your " — tags" etc.)
    // by wrapping it into a span so layout stays clean.
    const li = a.closest("li");
    if (li) {
      // Everything after the <a> currently sits as text nodes in the <li>.
      // We'll keep it, but wrap it so it sits next to the image neatly.
      // Only do this once.
      if (!li.querySelector(":scope > .thumb-caption")) {
        const caption = document.createElement("div");
        caption.className = "thumb-caption";

        // Move all nodes after <a> into caption
        let node = a.nextSibling;
        while (node) {
          const next = node.nextSibling;
          caption.appendChild(node);
          node = next;
        }
        li.appendChild(caption);
      }
    }

    // Replace link text with an <img> thumbnail.
    a.textContent = ""; // removes the URL/filename display

    const img = document.createElement("img");
    img.className = "thumb";
    img.loading = "lazy";
    img.decoding = "async";

    // Alt from filename (basic)
    try {
      const u = new URL(href, window.location.href);
      img.alt = (u.pathname.split("/").pop() || "image").replace(/[-_]/g, " ");
    } catch {
      img.alt = "image";
    }

    // Critical: only set src when region is open (this function is called on open)
    img.src = href;

    a.appendChild(img);
  }
}


  function fetchText(url) {
    if (!fetchCache.has(url)) {
      fetchCache.set(url, fetch(url, { cache: "force-cache" }).then(r => {
        if (!r.ok) throw new Error(`HTTP ${r.status}`);
        return r.text();
      }));
    }
    return fetchCache.get(url);
  }

  function extractForEmbed(htmlText) {
    const parser = new DOMParser();
    const doc = parser.parseFromString(htmlText, "text/html");

    // Remove scripts for safety and to avoid side-effects.
    doc.querySelectorAll("script").forEach(s => s.remove());

    // Collect inline <style> blocks.
    const styles = Array.from(doc.querySelectorAll("style"))
      .map(s => s.textContent || "")
      .join("\n");

    // Remove styles/links from body so they don't pollute the parent page.
    doc.body.querySelectorAll("style, link[rel='stylesheet']").forEach(n => n.remove());

    return { styles, content: doc.body.innerHTML, title: doc.title || "" };
  }

  function isSecondaryLink(a) {
    const href = a.getAttribute("href") || "";
    if (!href) return false;
    if (IMG_RE.test(href)) return false;

    return (
      SECONDARY_RE.test(href) ||
      a.dataset.secondary === "1" ||
      a.classList.contains("secondary-link")
    );
  }

  function ensureSecondaryPreviewUI(a) {
    const li = a.closest("li");
    if (!li) return;
    if (li.querySelector(":scope > details.secondary")) return;

    const href = a.getAttribute("href");

    const details = document.createElement("details");
    details.className = "secondary";

    // Minimal UI; embed area is filled on demand.
    details.innerHTML = `
      <summary>Inline preview</summary>
      <div class="secondary-status">Not loaded.</div>
      <div class="secondary-embed" data-href="${href.replace(/"/g, "&quot;")}"></div>
    `;

    li.appendChild(details);

    details.addEventListener("toggle", async () => {
      if (!details.open) return;

      const embed = details.querySelector(".secondary-embed");
      if (!embed || embed.dataset.loaded === "1") return;

      // Important: only load if the enclosing region is open (your requirement).
      const region = details.closest("details.region");
      if (!region || !region.open) return;

      const status = details.querySelector(".secondary-status");
      const url = embed.dataset.href;

      try {
        status.textContent = "Loading…";
        const htmlText = await fetchText(url);
        const { styles, content } = extractForEmbed(htmlText);

        // Shadow DOM isolates the embedded page's CSS so it doesn't leak into the parent.
        if (embed.attachShadow) {
          const root = embed.attachShadow({ mode: "open" });
          root.innerHTML = `
            <style>
              :host { display: block; }
              /* light reset inside the embedded view */
              body { margin: 0; }
            </style>
            <style>${styles}</style>
            <div class="embedded">${content}</div>
          `;
        } else {
          // Fallback: no isolation (older browsers).
          embed.innerHTML = `<div class="embedded">${content}</div>`;
        }

        embed.dataset.loaded = "1";
        status.textContent = "Loaded.";
      } catch (err) {
        status.textContent = `Failed to load (${url}): ${err.message || err}`;
      }
    });
  }

  function convertRegionSectionsToDetails() {
    document.querySelectorAll("section").forEach(sec => {
      const h3 = sec.querySelector(":scope > h3");
      const ul = sec.querySelector(":scope > ul");
      if (!h3 || !ul) return;

      const title = (h3.textContent || "").trim();
      if (!/^Region\b/i.test(title)) return;

      const details = document.createElement("details");
      details.className = "region";
      if (sec.getAttribute("style")) details.setAttribute("style", sec.getAttribute("style"));

      const summary = document.createElement("summary");
      summary.textContent = title;

      const body = document.createElement("div");
      body.className = "region-body";

      // Move <ul> into the dropdown body.
      body.appendChild(ul);

      details.appendChild(summary);
      details.appendChild(body);

      // Replace the entire section (drops the old h3).
      sec.replaceWith(details);
    });
  }

  async function onRegionOpen(regionDetails) {
  if (regionDetails.dataset.hydrated === "1") return;
  regionDetails.dataset.hydrated = "1";

  // NEW: turn image links into thumbnails (only loads now, on open)
  hydrateImageThumbnails(regionDetails);

  // Keep your existing HTML-inline-preview behaviour (if you still want it)
  const anchors = Array.from(regionDetails.querySelectorAll("a[href]"))
    .filter(isSecondaryLink);

  anchors.forEach(ensureSecondaryPreviewUI);

  if (PRELOAD_ON_REGION_OPEN) { /* unchanged */ }
}


  document.addEventListener("DOMContentLoaded", () => {
    convertRegionSectionsToDetails();

    document.querySelectorAll("details.region").forEach(d => {
      d.addEventListener("toggle", () => {
        if (d.open) onRegionOpen(d);
      });
    });
  });
})();
</script>
</body></html>
