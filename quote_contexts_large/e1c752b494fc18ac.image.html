<!doctype html>
<html lang="en"><head><meta charset="utf-8"><title>Image Context e1c752b494fc18ac</title>
<style>
body{font:14px/1.4 -apple-system,Segoe UI,Roboto,sans-serif;max-width:900px;margin:24px auto;padding:0 16px;color:#222}
h1{font-size:18px;margin:0 0 12px 0}
h2{font-size:16px;margin:16px 0 8px}
h3{font-size:14px;margin:10px 0 4px}
code,pre{background:#f6f8fa;padding:2px 4px;border-radius:4px}
figure{margin:10px 0;padding:8px;border:1px solid #e6e6e6;border-radius:8px}
figcaption{color:#555;font-size:12px;margin-top:6px}
pre {
  white-space: pre-wrap;     /* allow wrapping inside <pre> */
  overflow-wrap: anywhere;   /* break very long words/URLs */
  word-break: break-word;    /* fallback for older engines */
  max-width: 68ch;           /* ~68 characters line length */
  margin: 0 auto 10px;       /* center the block */
  line-height: 1.5;
}

figcaption {
  max-width: 68ch;           /* keep the sentence narrow */
  margin: 6px auto 0;        /* center under the image */
  white-space: normal;       /* ensure wrapping */
  overflow-wrap: anywhere;
  word-break: break-word;
  line-height: 1.5;
}
</style>
</head><body>
  <h1>Image context</h1>
  <p><strong>Search input:</strong></p>
  <pre>Planes</pre>
  <p><strong>Search mode:</strong> paragraph_v &nbsp; <strong>Targeting:</strong> 1.5×</p>

  <h2>Selected image</h2>
  <figure>
    <img src="https://pd12m.s3.us-west-2.amazonaws.com/images/6e76bc7e-5386-53a6-845e-06b78ec9e697.jpeg" alt="" style="max-width:100%;height:auto;">
    <figcaption>Region 0 — automobile, jackpot, convertible</figcaption>
  </figure>

  <h2>All regions</h2>
  <section style="margin:16px 0;"><h3 style="margin:6px 0;">Region 0 — fighting, sparring, wrestling, puncher, dealer, automobile, rambler, automobile, jackpot, convertible, sparring, fighting, wrestling, supra, dealer, convertible, arguing, proverb, dived, dodge, jackpot, wop, esp, vacancy, shooter, confronted, esp, surround, monitored, dived, automobile, rambler, sparring, confronted, valor, fighting, fighting, puncher, sparring, fighting, sparring, surround, fighting, thermos, automobile, convertible, supra, rambler, automobile</h3><ul style="margin:6px 0 0 18px;"><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/4bf11d14-51a6-5cbf-a523-e2c9a68508db.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/4bf11d14-51a6-5cbf-a523-e2c9a68508db.jpeg</a> — fighting, sparring, wrestling, puncher</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/ad5319f9-2ade-507d-a587-602810252b9a.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/ad5319f9-2ade-507d-a587-602810252b9a.jpeg</a> — dealer, automobile, rambler</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/6e76bc7e-5386-53a6-845e-06b78ec9e697.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/6e76bc7e-5386-53a6-845e-06b78ec9e697.jpeg</a> — automobile, jackpot, convertible</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/23f97553-9107-5bc7-b369-2eaa3830b29f.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/23f97553-9107-5bc7-b369-2eaa3830b29f.jpeg</a> — sparring, fighting, wrestling</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/7362cf4c-c1b9-59f4-8da9-c157ec155a71.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/7362cf4c-c1b9-59f4-8da9-c157ec155a71.jpeg</a> — supra, dealer, convertible</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/20c8bed1-eb18-5acd-b4e6-6b69acc38753.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/20c8bed1-eb18-5acd-b4e6-6b69acc38753.jpeg</a> — arguing, proverb</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/e1e4c2ca-2874-5503-bb77-e49d65539847.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/e1e4c2ca-2874-5503-bb77-e49d65539847.jpeg</a> — dived, dodge</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/16765426-2404-5784-8f09-de495d8e1ff0.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/16765426-2404-5784-8f09-de495d8e1ff0.jpeg</a> — jackpot, wop</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/28c8d229-2502-590a-be05-9c1a82ff6d8e.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/28c8d229-2502-590a-be05-9c1a82ff6d8e.jpeg</a> — esp, vacancy</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/33615f85-77ed-52c7-9eb9-0b5e45cd8cd6.png" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/33615f85-77ed-52c7-9eb9-0b5e45cd8cd6.png</a> — shooter, confronted</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/0f272c6f-92de-58ce-ae72-77709eb0fef7.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/0f272c6f-92de-58ce-ae72-77709eb0fef7.jpeg</a> — esp, surround</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/7fa8cdee-5731-508d-99a9-4522a302c42b.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/7fa8cdee-5731-508d-99a9-4522a302c42b.jpeg</a> — monitored, dived</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/479edb30-e81f-5bce-9c95-1b2f89537057.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/479edb30-e81f-5bce-9c95-1b2f89537057.jpeg</a> — automobile, rambler</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/a3e4d74a-9fba-5347-889d-b55b99a3dcc3.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/a3e4d74a-9fba-5347-889d-b55b99a3dcc3.jpeg</a> — sparring, confronted</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/2fd08954-0806-5580-bcfa-41cfec1d1e90.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/2fd08954-0806-5580-bcfa-41cfec1d1e90.jpeg</a> — valor, fighting</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/9388bd91-ff73-55e4-897a-9bd5c38ebee8.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/9388bd91-ff73-55e4-897a-9bd5c38ebee8.jpeg</a> — fighting, puncher, sparring</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/0085983a-4f70-552b-b7b4-8e22e859978d.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/0085983a-4f70-552b-b7b4-8e22e859978d.jpeg</a> — fighting, sparring, surround</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/03fff290-f197-533f-8294-d3f02eff308c.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/03fff290-f197-533f-8294-d3f02eff308c.jpeg</a> — fighting, thermos</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/bb70a551-e681-5c61-9f2a-f7b17ed9a266.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/bb70a551-e681-5c61-9f2a-f7b17ed9a266.jpeg</a> — automobile, convertible, supra</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/af9626be-8533-551f-bdb7-22572d2caac8.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/af9626be-8533-551f-bdb7-22572d2caac8.jpeg</a> — rambler, automobile</li></ul></section>
<section style="margin:16px 0;"><h3 style="margin:6px 0;">Region 1 — encoded, reconnaissance, inspect, quad, legionary, stereo, encoded, stereo, ripple, depth, legionary, crowing, recount, ripple, swooping, crowing, swooping, indigenous, cascading, depth, reconnaissance, refueled, covenant, indigenous, defrost, sabotage, vacation, walrus, steering, quad, sarge, deuce, sarge, deuce, autobahn, bawled, vacation, millimetre, millimetre, mileage, crumb, dehydrated, recount, libertarian</h3><ul style="margin:6px 0 0 18px;"><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/291bbbc2-eaf3-5611-ac4e-ba5bcc708e89.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/291bbbc2-eaf3-5611-ac4e-ba5bcc708e89.jpeg</a> — encoded, reconnaissance, inspect</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/dfd23307-d936-5e7e-9b3b-cc584f7b0ffe.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/dfd23307-d936-5e7e-9b3b-cc584f7b0ffe.jpeg</a> — quad, legionary, stereo</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/b20a4828-63a7-54bb-8d30-a0d4281d984d.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/b20a4828-63a7-54bb-8d30-a0d4281d984d.jpeg</a> — encoded, stereo, ripple</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/79c1c6e1-8238-547c-adab-aeae6fed4132.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/79c1c6e1-8238-547c-adab-aeae6fed4132.jpeg</a> — depth, legionary</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/449aac17-7092-5b1c-bfbb-ff0232f89e3a.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/449aac17-7092-5b1c-bfbb-ff0232f89e3a.jpeg</a> — crowing, recount, ripple</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/8fbabbed-1d22-5ec3-b799-f9bc946a86c8.png" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/8fbabbed-1d22-5ec3-b799-f9bc946a86c8.png</a> — swooping, crowing</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/eacaf9e5-08f5-5cde-bc60-860f28b08a63.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/eacaf9e5-08f5-5cde-bc60-860f28b08a63.jpeg</a> — swooping, indigenous</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/af7fca00-bef2-513e-b52a-57d1c310af5d.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/af7fca00-bef2-513e-b52a-57d1c310af5d.jpeg</a> — cascading, depth</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/b5ca0b73-0327-52e9-829a-b1f3f70b9c5f.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/b5ca0b73-0327-52e9-829a-b1f3f70b9c5f.jpeg</a> — reconnaissance, refueled</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/80153b7a-6e18-5a03-b6ca-2e0ca7f54547.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/80153b7a-6e18-5a03-b6ca-2e0ca7f54547.jpeg</a> — covenant, indigenous</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/1c7b5f8c-d648-5525-91d0-6c0e821e6153.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/1c7b5f8c-d648-5525-91d0-6c0e821e6153.jpeg</a> — defrost, sabotage</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/e56cec1b-5212-5584-b55b-1d60c17d4161.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/e56cec1b-5212-5584-b55b-1d60c17d4161.jpeg</a> — vacation, walrus</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/44643042-aea3-5112-a60d-0ec73c1e1893.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/44643042-aea3-5112-a60d-0ec73c1e1893.jpeg</a> — steering, quad</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/b455bf00-a8eb-58cc-80fa-7f62c0f46ede.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/b455bf00-a8eb-58cc-80fa-7f62c0f46ede.jpeg</a> — sarge, deuce</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/055efc2d-b65a-5cc2-a24f-3dd4e0d0beb6.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/055efc2d-b65a-5cc2-a24f-3dd4e0d0beb6.jpeg</a> — sarge, deuce</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/98fae216-22dc-518b-bc96-e4eb62ec277d.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/98fae216-22dc-518b-bc96-e4eb62ec277d.jpeg</a> — autobahn, bawled</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/e605e710-c517-52a8-ae16-efcf20aab85e.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/e605e710-c517-52a8-ae16-efcf20aab85e.jpeg</a> — vacation, millimetre</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/7ab2d777-d7c0-5e05-a2a4-420ac6629a62.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/7ab2d777-d7c0-5e05-a2a4-420ac6629a62.jpeg</a> — millimetre, mileage</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/b358de8f-2bda-5289-945e-4354a36b2ff4.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/b358de8f-2bda-5289-945e-4354a36b2ff4.jpeg</a> — crumb, dehydrated</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/5025ef0d-f08f-580a-a91d-976a081c29ed.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/5025ef0d-f08f-580a-a91d-976a081c29ed.jpeg</a> — recount, libertarian</li></ul></section>
<section style="margin:16px 0;"><h3 style="margin:6px 0;">Region 2 — jackhammer, patrimony, gravedigger, native, totem, patrimony, blowtorch, jackhammer, tattoo, totem, abides, native, journey, southern, gloss, femur, gravedigger, flaming, hydrate, bonfire, flaming, abides, gloss, proprietor, tattoo, beverage, mispronounce, spacing, southern, chaplain, chaperoned, chaperoned, chaplain, jewellery, spacing, proprietor, jewellery, patrimony, leg, apostle, jackhammer, blowtorch, patrimony, graph</h3><ul style="margin:6px 0 0 18px;"><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/2df9513c-1024-56f6-b67a-c0df411736dc.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/2df9513c-1024-56f6-b67a-c0df411736dc.jpeg</a> — jackhammer, patrimony, gravedigger</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/efccf1c0-3e66-5e64-914d-a0daddaf7ccc.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/efccf1c0-3e66-5e64-914d-a0daddaf7ccc.jpeg</a> — native, totem, patrimony</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/4609db18-8884-5b34-bd01-839a7a520cf4.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/4609db18-8884-5b34-bd01-839a7a520cf4.jpeg</a> — blowtorch, jackhammer</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/43c0ae1e-6515-5e6f-a758-241ae93ef76c.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/43c0ae1e-6515-5e6f-a758-241ae93ef76c.jpeg</a> — tattoo, totem</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/dd1e28bb-d181-53d7-a231-c79df8cb7842.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/dd1e28bb-d181-53d7-a231-c79df8cb7842.jpeg</a> — abides, native</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/173696a4-3d70-5abf-bedc-a9495379ad6d.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/173696a4-3d70-5abf-bedc-a9495379ad6d.jpeg</a> — journey, southern, gloss</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/2561a7cf-24bc-5b4c-83a9-f3a7389cfb41.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/2561a7cf-24bc-5b4c-83a9-f3a7389cfb41.jpeg</a> — femur, gravedigger</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/821e6aa5-a1db-57c1-9a9b-571854437140.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/821e6aa5-a1db-57c1-9a9b-571854437140.jpeg</a> — flaming, hydrate</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/3b5126e7-6b0c-50ad-a2ef-261400560a1b.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/3b5126e7-6b0c-50ad-a2ef-261400560a1b.jpeg</a> — bonfire, flaming</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/9c125f49-4e5e-5288-88cd-de2e08e0c4e4.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/9c125f49-4e5e-5288-88cd-de2e08e0c4e4.jpeg</a> — abides, gloss</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/b333aaaa-e1a6-5f4f-95b6-f9d5744b7392.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/b333aaaa-e1a6-5f4f-95b6-f9d5744b7392.jpeg</a> — proprietor, tattoo</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/27a97bd7-6867-53ef-a964-1105e48fb685.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/27a97bd7-6867-53ef-a964-1105e48fb685.jpeg</a> — beverage, mispronounce</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/04a79bbf-2d9a-535e-af81-4d4c6927b2a6.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/04a79bbf-2d9a-535e-af81-4d4c6927b2a6.jpeg</a> — spacing, southern</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/d838e4e7-e983-5c32-b945-fae456baa91c.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/d838e4e7-e983-5c32-b945-fae456baa91c.jpeg</a> — chaplain, chaperoned</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/a4eb8793-d0a6-52dd-930c-3d874ee96336.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/a4eb8793-d0a6-52dd-930c-3d874ee96336.jpeg</a> — chaperoned, chaplain</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/d2d06ada-679c-52ef-bd52-e2d11061896a.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/d2d06ada-679c-52ef-bd52-e2d11061896a.jpeg</a> — jewellery, spacing</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/7c2e0599-f6b6-59d2-87d3-953c28f09101.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/7c2e0599-f6b6-59d2-87d3-953c28f09101.jpeg</a> — proprietor, jewellery, patrimony</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/3cb3722f-388b-5bea-b43d-1080b43d1a39.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/3cb3722f-388b-5bea-b43d-1080b43d1a39.jpeg</a> — leg, apostle</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/f9859084-0a14-5843-bb02-fa823dc576ab.jpeg" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/f9859084-0a14-5843-bb02-fa823dc576ab.jpeg</a> — jackhammer, blowtorch</li><li><a href="https://pd12m.s3.us-west-2.amazonaws.com/images/064551b3-f1e5-5436-ad22-c69ed61a75c3.png" target="_blank">https://pd12m.s3.us-west-2.amazonaws.com/images/064551b3-f1e5-5436-ad22-c69ed61a75c3.png</a> — patrimony, graph</li></ul></section>
<style>
  /* Region dropdowns */
  details.region {
    margin: 16px 0;
    border: 1px solid #e6e6e6;
    border-radius: 10px;
    padding: 8px 10px;
    background: #fff;
  }
  details.region > summary {
    cursor: pointer;
    font-weight: 600;
    list-style: none;
    outline: none;
  }
  details.region > summary::-webkit-details-marker { display: none; }
  details.region[open] > summary { margin-bottom: 8px; }

  /* Secondary (inline preview) dropdowns under each link */
  details.secondary {
    margin-top: 6px;
    border-left: 3px solid #e6e6e6;
    padding-left: 10px;
  }
  details.secondary > summary {
    cursor: pointer;
    font-size: 12px;
    color: #444;
    list-style: none;
    outline: none;
  }
  details.secondary > summary::-webkit-details-marker { display: none; }

  .secondary-status {
    font-size: 12px;
    color: #666;
    margin: 6px 0;
  }
  .secondary-embed {
    border: 1px solid #eee;
    border-radius: 8px;
    padding: 8px;
    overflow: auto;
    max-height: 70vh;
    background: #fafafa;
  }
  details.region ul { padding-left: 0; }
  details.region li {
    list-style: none;
    display: flex;
    gap: 10px;
    align-items: flex-start;
    margin: 10px 0;
  }

  a.thumb-link { display: inline-block; }
  img.thumb {
    display: block;
    width: 140px;          /* tweak as desired */
    height: auto;
    border: 1px solid #e6e6e6;
    border-radius: 10px;
    background: #fff;
  }

  /* If you want the caption text to wrap nicely next to the thumb */
  .thumb-caption {
    line-height: 1.25;
  }
</style>

<script>
(() => {
  /**
   * Controls behaviour:
   * - If true: when a REGION opens, prefetch all secondary HTML previews in that region.
   * - If false (default): only fetch when the per-link “Inline preview” dropdown is opened
   *   (still satisfies “only when region is expanded”, because you can’t open the preview otherwise).
   */
  const PRELOAD_ON_REGION_OPEN = false;

  // Consider a link “secondary HTML” if it ends with .html/.htm/.xhtml
  // OR if you explicitly mark it with class="secondary-link" or data-secondary="1".
  const SECONDARY_RE = /\.(?:xhtml|html?|htm)(?:[?#].*)?$/i;
  const IMG_RE = /\.(?:png|jpe?g|gif|webp|svg)(?:[?#].*)?$/i;

  // Cache fetches so repeated opens don't refetch the same page.
  const fetchCache = new Map(); // url -> Promise<string>

  function hydrateImageThumbnails(regionDetails) {
  const anchors = Array.from(regionDetails.querySelectorAll("a[href]"));

  for (const a of anchors) {
    const href = a.getAttribute("href") || "";
    if (!IMG_RE.test(href)) continue;

    // If already an image (e.g., you manually made one), skip.
    if (a.querySelector("img")) continue;

    // Make the link open the full image in a new tab (optional but usually nicer)
    a.target = "_blank";
    a.rel = "noopener";
    a.classList.add("thumb-link");

    // Preserve any trailing text after the link (your " — tags" etc.)
    // by wrapping it into a span so layout stays clean.
    const li = a.closest("li");
    if (li) {
      // Everything after the <a> currently sits as text nodes in the <li>.
      // We'll keep it, but wrap it so it sits next to the image neatly.
      // Only do this once.
      if (!li.querySelector(":scope > .thumb-caption")) {
        const caption = document.createElement("div");
        caption.className = "thumb-caption";

        // Move all nodes after <a> into caption
        let node = a.nextSibling;
        while (node) {
          const next = node.nextSibling;
          caption.appendChild(node);
          node = next;
        }
        li.appendChild(caption);
      }
    }

    // Replace link text with an <img> thumbnail.
    a.textContent = ""; // removes the URL/filename display

    const img = document.createElement("img");
    img.className = "thumb";
    img.loading = "lazy";
    img.decoding = "async";

    // Alt from filename (basic)
    try {
      const u = new URL(href, window.location.href);
      img.alt = (u.pathname.split("/").pop() || "image").replace(/[-_]/g, " ");
    } catch {
      img.alt = "image";
    }

    // Critical: only set src when region is open (this function is called on open)
    img.src = href;

    a.appendChild(img);
  }
}


  function fetchText(url) {
    if (!fetchCache.has(url)) {
      fetchCache.set(url, fetch(url, { cache: "force-cache" }).then(r => {
        if (!r.ok) throw new Error(`HTTP ${r.status}`);
        return r.text();
      }));
    }
    return fetchCache.get(url);
  }

  function extractForEmbed(htmlText) {
    const parser = new DOMParser();
    const doc = parser.parseFromString(htmlText, "text/html");

    // Remove scripts for safety and to avoid side-effects.
    doc.querySelectorAll("script").forEach(s => s.remove());

    // Collect inline <style> blocks.
    const styles = Array.from(doc.querySelectorAll("style"))
      .map(s => s.textContent || "")
      .join("\n");

    // Remove styles/links from body so they don't pollute the parent page.
    doc.body.querySelectorAll("style, link[rel='stylesheet']").forEach(n => n.remove());

    return { styles, content: doc.body.innerHTML, title: doc.title || "" };
  }

  function isSecondaryLink(a) {
    const href = a.getAttribute("href") || "";
    if (!href) return false;
    if (IMG_RE.test(href)) return false;

    return (
      SECONDARY_RE.test(href) ||
      a.dataset.secondary === "1" ||
      a.classList.contains("secondary-link")
    );
  }

  function ensureSecondaryPreviewUI(a) {
    const li = a.closest("li");
    if (!li) return;
    if (li.querySelector(":scope > details.secondary")) return;

    const href = a.getAttribute("href");

    const details = document.createElement("details");
    details.className = "secondary";

    // Minimal UI; embed area is filled on demand.
    details.innerHTML = `
      <summary>Inline preview</summary>
      <div class="secondary-status">Not loaded.</div>
      <div class="secondary-embed" data-href="${href.replace(/"/g, "&quot;")}"></div>
    `;

    li.appendChild(details);

    details.addEventListener("toggle", async () => {
      if (!details.open) return;

      const embed = details.querySelector(".secondary-embed");
      if (!embed || embed.dataset.loaded === "1") return;

      // Important: only load if the enclosing region is open (your requirement).
      const region = details.closest("details.region");
      if (!region || !region.open) return;

      const status = details.querySelector(".secondary-status");
      const url = embed.dataset.href;

      try {
        status.textContent = "Loading…";
        const htmlText = await fetchText(url);
        const { styles, content } = extractForEmbed(htmlText);

        // Shadow DOM isolates the embedded page's CSS so it doesn't leak into the parent.
        if (embed.attachShadow) {
          const root = embed.attachShadow({ mode: "open" });
          root.innerHTML = `
            <style>
              :host { display: block; }
              /* light reset inside the embedded view */
              body { margin: 0; }
            </style>
            <style>${styles}</style>
            <div class="embedded">${content}</div>
          `;
        } else {
          // Fallback: no isolation (older browsers).
          embed.innerHTML = `<div class="embedded">${content}</div>`;
        }

        embed.dataset.loaded = "1";
        status.textContent = "Loaded.";
      } catch (err) {
        status.textContent = `Failed to load (${url}): ${err.message || err}`;
      }
    });
  }

  function convertRegionSectionsToDetails() {
    document.querySelectorAll("section").forEach(sec => {
      const h3 = sec.querySelector(":scope > h3");
      const ul = sec.querySelector(":scope > ul");
      if (!h3 || !ul) return;

      const title = (h3.textContent || "").trim();
      if (!/^Region\b/i.test(title)) return;

      const details = document.createElement("details");
      details.className = "region";
      if (sec.getAttribute("style")) details.setAttribute("style", sec.getAttribute("style"));

      const summary = document.createElement("summary");
      summary.textContent = title;

      const body = document.createElement("div");
      body.className = "region-body";

      // Move <ul> into the dropdown body.
      body.appendChild(ul);

      details.appendChild(summary);
      details.appendChild(body);

      // Replace the entire section (drops the old h3).
      sec.replaceWith(details);
    });
  }

  async function onRegionOpen(regionDetails) {
  if (regionDetails.dataset.hydrated === "1") return;
  regionDetails.dataset.hydrated = "1";

  // NEW: turn image links into thumbnails (only loads now, on open)
  hydrateImageThumbnails(regionDetails);

  // Keep your existing HTML-inline-preview behaviour (if you still want it)
  const anchors = Array.from(regionDetails.querySelectorAll("a[href]"))
    .filter(isSecondaryLink);

  anchors.forEach(ensureSecondaryPreviewUI);

  if (PRELOAD_ON_REGION_OPEN) { /* unchanged */ }
}


  document.addEventListener("DOMContentLoaded", () => {
    convertRegionSectionsToDetails();

    document.querySelectorAll("details.region").forEach(d => {
      d.addEventListener("toggle", () => {
        if (d.open) onRegionOpen(d);
      });
    });
  });
})();
</script>

</body></html>
